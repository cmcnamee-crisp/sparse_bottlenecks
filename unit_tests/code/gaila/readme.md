# Unit Testing for Concepts

Our code/data are available at 

```
bit.ly/unit-concepts-drive
```

Our results can also be seen in a colab at 

```
bit.ly/unit-concepts-colab
```


If you want to re-run everything (note this assumes you have access to slurm):

# 1. Environment setup

Assumes slurm.

```bash
module load python/3.7.4

### slurm
conda create gaila
conda activate gaila

pip install torch
pip install ftfy regex tqdm pytorch-lightning pandas seaborn pytest matplotlib
pip install git+https://github.com/openai/CLIP.git
```

# 2. Run code 

Assumes slurm.

You may have to change some options within `job.py` to request the appropriate queue and 
activate your `conda` environment.

```bash
# Sets up folders.
setup.sh 

# Create dataset.

# You can check out the settings in the folder to 
# reduce the amount of compute.
# You can skip this step if you download our precomputed data.
sbatch dataset/pipeline.sh

# 5. pretrain/train/test models
sbatch experiments/pipeline.sh
```

# 3. Download results.
```bash

# I made a script and call this for the experiments train-final and t1-final and t3t4-final.
rsync --progress [USER]:[PATH]/results/$1/\* results/$1
```

# 4. Figures.
The figures in paper were generated by:

```bash
python figures/collect.py
python figures/tikz.py
```

Alternatively, you can use `figures/collect.py` to process the data and then use the notebook found at `bit.ly/unit-concepts-colab`.